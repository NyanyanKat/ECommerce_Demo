<!DOCTYPE html>
<html>

<head>
    <title>E-Commerce Registration Page</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"
        referrerpolicy="no-referrer"></script>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
</head>

<style>
    h2,
    div {
        text-align: center;
    }
</style>


<body>
    <div id="nav-placeholder">
    </div>

    <h2>E-Commerce Registration</h2>
    <hr />
    <div class="register">
        <form id="register">
            <label>Username: </label>
            <input type="text" id="username">
            <br /><br />
            <label>Email: </label>
            <input type="text" id="email">
            <br /><br />
            <label>Password: </label>
            <input type="text" id="password">
            <br /><br />
            <input type="button" id="btn2" value="Register">
        </form>
    </div>

</body>

<script>
$(function() {
    $('#nav-placeholder').load("navbar.html")
});

    $(document).ready(function () {
        const host = "http://localhost:3000";


        $('#btn2').on('click', function () {
            $.ajax({
                url: `${host}/user/register`,
                type: "POST",
                data: JSON.stringify({
                    username: $('#username').val(),
                    email: $('#email').val(),
                    password: $('#password').val()
                }),
                contentType: "application/json; charset=utf-8",
                success: function (res) {
                    alert("Registration Successful.");
                    window.location = `${host}/login`;
                },
                error: function (e) {
                    alert("Invalid field values");
                }
            });
        });
    })

</script>


</html>